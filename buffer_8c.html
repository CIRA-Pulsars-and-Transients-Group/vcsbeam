<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VCSBeam: buffer.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VCSBeam
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">buffer.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;mwalib.h&gt;</code><br />
<code>#include &quot;vcsbeam.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac3bea5a75804335dcce618820d5c28cf"><td class="memItemLeft" align="right" valign="top">host_buffer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer_8c.html#ac3bea5a75804335dcce618820d5c28cf">vmInitReadBuffer</a> (size_t read_size, size_t copy_size)</td></tr>
<tr class="memdesc:ac3bea5a75804335dcce618820d5c28cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise a buffer for reading in voltage data.  <a href="buffer_8c.html#ac3bea5a75804335dcce618820d5c28cf">More...</a><br /></td></tr>
<tr class="separator:ac3bea5a75804335dcce618820d5c28cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01b03d9641b8e42ad987ba3ff67ff60f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer_8c.html#a01b03d9641b8e42ad987ba3ff67ff60f">vmFreeReadBuffer</a> (host_buffer *rb)</td></tr>
<tr class="memdesc:a01b03d9641b8e42ad987ba3ff67ff60f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the memory allocated in <a class="el" href="buffer_8c.html#ac3bea5a75804335dcce618820d5c28cf" title="Initialise a buffer for reading in voltage data.">vmInitReadBuffer()</a>  <a href="buffer_8c.html#a01b03d9641b8e42ad987ba3ff67ff60f">More...</a><br /></td></tr>
<tr class="separator:a01b03d9641b8e42ad987ba3ff67ff60f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a109487b3c208a838fc864855f32ed4e8"><td class="memItemLeft" align="right" valign="top">vm_error&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer_8c.html#a109487b3c208a838fc864855f32ed4e8">vmReadBufferCopyMargin</a> (host_buffer *rb)</td></tr>
<tr class="memdesc:a109487b3c208a838fc864855f32ed4e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy the data from the end of the read buffer to the beginning.  <a href="buffer_8c.html#a109487b3c208a838fc864855f32ed4e8">More...</a><br /></td></tr>
<tr class="separator:a109487b3c208a838fc864855f32ed4e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a01b03d9641b8e42ad987ba3ff67ff60f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01b03d9641b8e42ad987ba3ff67ff60f">&#9670;&nbsp;</a></span>vmFreeReadBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vmFreeReadBuffer </td>
          <td>(</td>
          <td class="paramtype">host_buffer *&#160;</td>
          <td class="paramname"><em>rb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the memory allocated in <a class="el" href="buffer_8c.html#ac3bea5a75804335dcce618820d5c28cf" title="Initialise a buffer for reading in voltage data.">vmInitReadBuffer()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rb</td><td>The read buffer to be freed</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="buffer_8c.html#ac3bea5a75804335dcce618820d5c28cf" title="Initialise a buffer for reading in voltage data.">vmInitReadBuffer()</a> </dd></dl>

</div>
</div>
<a id="ac3bea5a75804335dcce618820d5c28cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3bea5a75804335dcce618820d5c28cf">&#9670;&nbsp;</a></span>vmInitReadBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">host_buffer* vmInitReadBuffer </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>read_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>copy_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise a buffer for reading in voltage data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">read_size</td><td>The size of the "read" portion of the buffer into which the data are read </td></tr>
    <tr><td class="paramname">copy_size</td><td>The size of the "copy" portion of the buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to a newly allocated read buffer</dd></dl>
<p>The read buffer is designed for situations where the data must be read in a section at a time, but where operations on the data require it to be treated list a continuous stream. In this regard, it is similar to a ring buffer. Here, however, the problem is solved by copying a portion of data at the end of the buffer to the beginning of the buffer at each successive read. For this to be efficient, the size of the needed overlap between consecutive sections must be small enough that copying the data around in this way does not carry a significant amount of overhead.</p>
<p>The relationship between the total buffer, the read buffer, and the copy buffer are illustrated in the following diagram.</p>
<div class="fragment"><div class="line"> &lt;----------------------- buffer_size -------------------------&gt;</div>
<div class="line">               &lt;---------------- read_size --------------------&gt;</div>
<div class="line"> &lt;-copy_size-&gt;                                     &lt;-copy_size-&gt;</div>
<div class="line"> </div>
<div class="line">|-------------|-----------------------------------|-------------|</div>
<div class="line">^             ^                                   ^</div>
<div class="line">buffer        read_ptr                            copy_from_ptr</div>
<div class="line">copy_to_ptr</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="buffer_8c.html#a01b03d9641b8e42ad987ba3ff67ff60f" title="Frees the memory allocated in vmInitReadBuffer()">vmFreeReadBuffer()</a> </dd>
<dd>
<a class="el" href="buffer_8c.html#a109487b3c208a838fc864855f32ed4e8" title="Copy the data from the end of the read buffer to the beginning.">vmReadBufferCopyMargin()</a> </dd>
<dd>
<a class="el" href="metadata_8c.html#a46564605d923a726165f118fdb5d7998" title="Reads a second&#39;s worth of input data from the observation files.">vmReadNextSecond()</a> </dd></dl>

</div>
</div>
<a id="a109487b3c208a838fc864855f32ed4e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a109487b3c208a838fc864855f32ed4e8">&#9670;&nbsp;</a></span>vmReadBufferCopyMargin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vm_error vmReadBufferCopyMargin </td>
          <td>(</td>
          <td class="paramtype">host_buffer *&#160;</td>
          <td class="paramname"><em>rb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy the data from the end of the read buffer to the beginning. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rb</td><td>The read buffer to be operated on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>VM_READ_BUFFER_NOT_SET if either <code>rb</code> or <code>rb&rarr;buffer</code> is NULL, or VM_SUCCESS if the memory is copied successfully.</dd></dl>
<p>This copies <code>copy_size</code> bytes from <code>copy_from_ptr</code> to <code>copy_to_ptr</code>. See <a class="el" href="buffer_8c.html#ac3bea5a75804335dcce618820d5c28cf" title="Initialise a buffer for reading in voltage data.">vmInitReadBuffer()</a> for a relevant diagram.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="buffer_8c.html#ac3bea5a75804335dcce618820d5c28cf" title="Initialise a buffer for reading in voltage data.">vmInitReadBuffer()</a> </dd>
<dd>
<a class="el" href="metadata_8c.html#a46564605d923a726165f118fdb5d7998" title="Reads a second&#39;s worth of input data from the observation files.">vmReadNextSecond()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
