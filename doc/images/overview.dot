digraph overview {
    node [shape=record];
    splines = curved;

    targetobs [ label="Target\nObs", shape=circle ];
    date [ label="Before\nSep 2021?", shape=diamond ];
    raw [ label="Fine channel\nvoltages (.raw)" ];
    sub [ label="Coarse channel\nvoltages (.sub)" ];
    dat [ label="Recombined\nvoltages (.dat)" ];
    //legacyvis [ label="Correlated\nvisibilities (.fits)" ];
    outputchannelisation [ label="Output\nchannelisation?", shape=diamond ];
    psrfits [ label="PSRFITS\nFull Stokes" ];
    vdif [ label="VDIF\nVoltages" ];

    targetobs -> date;
    date -> raw [ xlabel="Yes (Legacy)" ];
    date -> sub [ label="No (MWAX)" ];
    raw -> dat [ xlabel="recombine" ];
    sub -> dat [ xlabel="offline_pfb" ];
    dat -> outputchannelisation [ label="make_mwa_tied_array_beam" ];
    sub -> outputchannelisation [ xlabel="make_mwa_tied_array_beam" ];
    outputchannelisation -> psrfits [ xlabel="10 kHz" ];
    outputchannelisation -> vdif [ label="1.28 MHz" ];
    //dat -> legacyvis [ label="offline_correlator" ];

    {rank = same; raw; sub;}
}
