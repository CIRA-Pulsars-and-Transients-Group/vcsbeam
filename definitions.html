<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VCSBeam: Definitions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VCSBeam
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Definitions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md3">Coordinate systems</a><ul><li class="level2"><a href="#autotoc_md4">Instrumental coordinates</a></li>
<li class="level2"><a href="#autotoc_md5">Local sky coordinates</a></li>
<li class="level2"><a href="#autotoc_md6">Celestial sky coordinates</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md7">Coordinate transformations</a><ul><li class="level2"><a href="#parallacticangle">Parallactic angle correction</a></li>
</ul>
</li>
<li class="level1"><a href="#datadimensions">Data dimensions</a></li>
<li class="level1"><a href="#autotoc_md8">Comparison of notation in other documents</a><ul><li class="level2"><a href="#autotoc_md9">Coordinate systems</a></li>
<li class="level2"><a href="#autotoc_md10">Jones matrices</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_Definitions"></a></p>
<h1><a class="anchor" id="autotoc_md3"></a>
Coordinate systems</h1>
<p>There are three coordinate systems in use throughout VCSBeam:</p><ul>
<li>Instrumental ( <img class="formulaInl" alt="$p$" src="form_0.svg"/>, <img class="formulaInl" alt="$q$" src="form_1.svg"/>)</li>
<li>Local sky coordinates ( <img class="formulaInl" alt="$\theta$" src="form_2.svg"/>, <img class="formulaInl" alt="$\phi$" src="form_3.svg"/>)</li>
<li>Celestial sky coordinates ( <img class="formulaInl" alt="$x$" src="form_4.svg"/>, <img class="formulaInl" alt="$y$" src="form_5.svg"/>) They are illustrated in the following figure:</li>
</ul>
<div class="image">
<img src="coords.png" alt="" width="800"/>
</div>
 <h2><a class="anchor" id="autotoc_md4"></a>
Instrumental coordinates</h2>
<p>This is a Cartesian coordinate system aligned with local (ground) compass directions. Positive <img class="formulaInl" alt="$p$" src="form_0.svg"/> points towards local North, and positive <img class="formulaInl" alt="$q$" src="form_1.svg"/> towards local East. The <img class="formulaInl" alt="$P$" src="form_6.svg"/> polarisation refers to the physical set of dipoles parallel to the N-S line; the <img class="formulaInl" alt="$Q$" src="form_7.svg"/> polarisation, to the E-W line.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Local sky coordinates</h2>
<p>This is a spherical coordinate system defined with respect to a local observer. <img class="formulaInl" alt="$\theta$" src="form_2.svg"/> is the <em>zenith angle</em>, i.e. a \textit{colatitude}, with zenith itself therefore defined as <img class="formulaInl" alt="$\theta = 0$" src="form_8.svg"/> and the horizon as <img class="formulaInl" alt="$\theta = \pi/2$" src="form_9.svg"/>. <img class="formulaInl" alt="$\phi$" src="form_3.svg"/> is the <em>azimuth</em>, and we define <img class="formulaInl" alt="$\phi = 0$" src="form_10.svg"/> in the North direction, with positive azimuth moving clockwise as viewed from above (i.e. N&rarr;E&rarr;S&rarr;W&rarr;N). Moreover, the <em>elevation</em> is denoted by the symbol <img class="formulaInl" alt="$\tilde{\theta}$" src="form_11.svg"/>, and is related to the zenith angle by </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \tilde{\theta} = \frac{\pi}{2} - \theta. \]" src="form_12.svg"/>
</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Celestial sky coordinates</h2>
<p>This is a spherical coordinate system defined with respect to the celestial sphere. <img class="formulaInl" alt="$x$" src="form_4.svg"/> is the <em>declination</em> (Dec) and <img class="formulaInl" alt="$y$" src="form_5.svg"/> is the <em>right ascension</em> (RA).</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Coordinate transformations</h1>
<p>All coordinate transformations can be effected by applying the appropriate Jacobian matrix for the desired transformation. In this documentation, a boldface <img class="formulaInl" alt="${\bf P}$" src="form_13.svg"/> will always be used to denote transformation matrices. For general coordinates <img class="formulaInl" alt="$(a,b)$" src="form_14.svg"/> and <img class="formulaInl" alt="$(c,d)$" src="form_15.svg"/>, </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ {\bf P}_{(a,b)\rightarrow(c,d)} \equiv \begin{bmatrix} P_{ca} &amp; P_{cb} \\ P_{da} &amp; P_{db} \end{bmatrix} \equiv \begin{bmatrix} \frac{\partial c}{\partial a} &amp; \frac{\partial c}{\partial b} \\[5 pt] \frac{\partial d}{\partial a} &amp; \frac{\partial d}{\partial b} \end{bmatrix} \]" src="form_16.svg"/>
</p>
<p> Among these, the only transformation that is explicitly used in VCSBeam is the transformation between local sky coordinates and celestial sky coordinates, which is a single rotation within the sky plane by the parallactic angle.</p>
<h2><a class="anchor" id="parallacticangle"></a>
Parallactic angle correction</h2>
<p>The parallactic angle correction is a transformation between local sky coordinates and celestial sky coordinates. The parallactic angle itself, <img class="formulaInl" alt="$\chi$" src="form_17.svg"/>, is defined as the position angle of local zenith with respect to the North Celestial Pole as subtended at a given source, illustrated in the following figure.</p>
<div class="image">
<img src="skyangles.png" alt="" width="300"/>
</div>
 <p>The transformation <img class="formulaInl" alt="$(x,y)\rightarrow(\theta,\phi)$" src="form_18.svg"/> is therefore a counterclockwise rotation by <img class="formulaInl" alt="$\pi - \chi$" src="form_19.svg"/>. (A counterclockwise rotation of a given vector is equivalent to a clockwise rotation of the coordinate axes.) This is the rotation </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ {\bf P}_\text{pa} = \begin{bmatrix} P_{\theta x} &amp; P_{\theta y} \\ P_{\phi x} &amp; P_{\phi y} \end{bmatrix} = \begin{bmatrix} \cos\left(\pi - \chi\right) &amp; -\sin\left(\pi - \chi\right) \\ \sin\left(\pi - \chi\right) &amp; \cos\left(\pi - \chi\right) \end{bmatrix} = \begin{bmatrix} -\cos\chi &amp; -\sin\chi \\ \sin\chi &amp; -\cos\chi \end{bmatrix}. \]" src="form_20.svg"/>
</p>
<p>In VCSBeam, the parallactic angle is calculated (via the function <code>palPa</code>) in the <a href="https://github.com/Starlink/pal">Starlink/pal library</a> by the spherical triangle identity </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \tan \chi = \frac{\cos \lambda \sin H}{\sin\lambda \cos x - \cos \lambda \sin x \cos H}, \]" src="form_21.svg"/>
</p>
<p> where <img class="formulaInl" alt="$\lambda$" src="form_22.svg"/> is the latitude of the observer, <img class="formulaInl" alt="$H$" src="form_23.svg"/> is the hour angle of the source, and <img class="formulaInl" alt="$x$" src="form_4.svg"/> is the declination. The latitude of the MWA is <img class="formulaInl" alt="$\lambda_\text{MWA} = -0.4660608448386394$" src="form_24.svg"/> rad, defined in the <a href="https://github.com/MWATelescope/mwalib">mwalib</a> library.</p>
<h1><a class="anchor" id="datadimensions"></a>
Data dimensions</h1>
<p>All data are functions of time (<em>t</em>), frequency (<em>f</em>), antenna (<em>a</em>), and/or polarisation (<em>p</em>). Accordingly, the size of data arrays are expressed in terms of <img class="formulaInl" alt="$N_t$" src="form_25.svg"/>, <img class="formulaInl" alt="$N_f$" src="form_26.svg"/>, <img class="formulaInl" alt="$N_a$" src="form_27.svg"/>, and <img class="formulaInl" alt="$N_p$" src="form_28.svg"/>. The order of the dimensions indicates the layout of the data arrays in memory, with the first dimension being the slowest changing dimension, and so on until the last dimension, which is the fastest changing. For example, the instrumental calibration matrices ( <img class="formulaInl" alt="${\bf D}$" src="form_29.svg"/>) have dimensions </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ N_a \times N_f \times N_p \times N_p, \]" src="form_30.svg"/>
</p>
<p> and a single element is specified with the index notation, <img class="formulaInl" alt="$D_{a,f,p_1,p_2}$" src="form_31.svg"/>. <em>Jones vectors</em>, indicated with a lower case Latin letter in <b>bold</b>, include a polarisation dimension implicitly, e.g. </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ {\bf e} = \begin{bmatrix} e_x \\ e_y \end{bmatrix}, \]" src="form_32.svg"/>
</p>
<p> where <img class="formulaInl" alt="$x$" src="form_4.svg"/> and <img class="formulaInl" alt="$y$" src="form_5.svg"/> are examples of a specific polarisation basis. Similary, <em>Jones matrices</em>, represented with <b>bold</b> uppercase Latin letters, have two implied polarisation dimensions, e.g. </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ {\bf J} = \begin{bmatrix} J_{xx} &amp; J_{xy} \\ J_{yx} &amp; J_{yy} \end{bmatrix}. \]" src="form_33.svg"/>
</p>
<p>The exception to the above system is the data layout of the legacy recombined format, in which the combinations of antennas and polarisations are ordered in a "mixed" way, so that it cannot be said that either antennas or polarisations change faster than the other. For this case, we describe a particular antenna-polarisation combination as an "input", and denote it with the subscript <img class="formulaInl" alt="$i$" src="form_34.svg"/>, with <img class="formulaInl" alt="$N_i = N_a \times N_p$" src="form_35.svg"/> (without the implied hierarchical ordering).</p>
<p>Full Stokes parameters are the set <img class="formulaInl" alt="$\{I, Q, U, V\}$" src="form_36.svg"/>. Accordingly, an array containing these "post-detection" products may include the dimension <img class="formulaInl" alt="$N_s$" src="form_37.svg"/>, which always equals exactly 4.</p>
<p>Each MWA tile contains <img class="formulaInl" alt="$N_d = 16$" src="form_38.svg"/> dipoles.</p>
<p>Multiple pointings can also be processed simultaneously, and some output arrays therefore include dimension <img class="formulaInl" alt="$N_b$" src="form_39.svg"/>.</p>
<p>The complete list, in alphabetical order of subscripts, is </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Symbol   </th><th class="markdownTableHeadLeft">Description   </th><th class="markdownTableHeadCenter">Typical values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img class="formulaInl" alt="$N_a$" src="form_27.svg"/>   </td><td class="markdownTableBodyLeft">Number of tiles/antennas   </td><td class="markdownTableBodyCenter">128    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><img class="formulaInl" alt="$N_b$" src="form_39.svg"/>   </td><td class="markdownTableBodyLeft">Number of beams/pointings   </td><td class="markdownTableBodyCenter">1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img class="formulaInl" alt="$N_d$" src="form_40.svg"/>   </td><td class="markdownTableBodyLeft">Number of dipoles per tile   </td><td class="markdownTableBodyCenter">16    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><img class="formulaInl" alt="$N_f$" src="form_26.svg"/>   </td><td class="markdownTableBodyLeft">Number of frequencies per coarse channel   </td><td class="markdownTableBodyCenter">128    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img class="formulaInl" alt="$N_p$" src="form_28.svg"/>   </td><td class="markdownTableBodyLeft">Number of polarisations   </td><td class="markdownTableBodyCenter">2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><img class="formulaInl" alt="$N_s$" src="form_37.svg"/>   </td><td class="markdownTableBodyLeft">Number of Stokes parameters   </td><td class="markdownTableBodyCenter">4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img class="formulaInl" alt="$N_t$" src="form_25.svg"/>   </td><td class="markdownTableBodyLeft">Number of timesteps/samples per second   </td><td class="markdownTableBodyCenter">10000   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md8"></a>
Comparison of notation in other documents</h1>
<h2><a class="anchor" id="autotoc_md9"></a>
Coordinate systems</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Document   </th><th class="markdownTableHeadCenter"></th><th class="markdownTableHeadCenter"></th><th class="markdownTableHeadCenter"></th><th class="markdownTableHeadCenter"></th><th class="markdownTableHeadCenter"></th><th class="markdownTableHeadCenter"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><em>This document</em>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="$p$" src="form_0.svg"/>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="$q$" src="form_1.svg"/>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="$\theta$" src="form_2.svg"/>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="$\phi$" src="form_3.svg"/>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="$x$" src="form_4.svg"/>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="$y$" src="form_5.svg"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">MWA metafits files   </td><td class="markdownTableBodyCenter">Y   </td><td class="markdownTableBodyCenter">X   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">-   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md10"></a>
Jones matrices</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Document   </th><th class="markdownTableHeadCenter"></th><th class="markdownTableHeadCenter"></th><th class="markdownTableHeadCenter"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><em>This document</em>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="${\bf J}$" src="form_41.svg"/>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="${\bf D}$" src="form_29.svg"/>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="${\bf B}$" src="form_42.svg"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a href="https://www.cambridge.org/core/journals/publications-of-the-astronomical-society-of-australia/article/calibration-and-stokes-imaging-with-full-embedded-element-primary-beam-model-for-the-murchison-widefield-array/FBA84B9EB94000BD6258A8F75840C476">Sokolowski et al., (2017)</a>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="${\bf J}$" src="form_41.svg"/>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="${\bf G}$" src="form_43.svg"/>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="${\bf E}$" src="form_44.svg"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a href="https://www.cambridge.org/core/journals/publications-of-the-astronomical-society-of-australia/article/abs/mwa-tiedarray-processing-i-calibration-and-beamformation/E9A7A9981AE9A935C9E08500CA6A1C1E">Ord et al., (2019)</a>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="${\bf J}$" src="form_41.svg"/>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="${\bf D}$" src="form_29.svg"/>   </td><td class="markdownTableBodyCenter"><img class="formulaInl" alt="${\bf B}$" src="form_42.svg"/>   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
